<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Activation â€” AccÃ¨s au canal Telegram</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="wrap">
    <section class="card" role="region" aria-labelledby="form-title">
      <h1 id="form-title">AccÃ¨s au canal Telegram</h1>
      <p class="lead">Entrez votre clÃ© d'activation pour recevoir le lien du canal.</p>

      <form id="keyForm" autocomplete="off" novalidate>
        <label for="keyInput" class="small">ClÃ© d'activation</label>
        <div class="input-group">
          <input id="keyInput" name="key" type="text" placeholder="Ex: ABC123-XXXX" required aria-describedby="errorMsg" />
          <button id="submitBtn" type="submit">Valider</button>
        </div>
        <div id="errorMsg" class="error" role="alert" aria-live="assertive"></div>
      </form>

      <div id="result" class="result" hidden>
        <div class="small">Lien du canal :</div>
        <div class="link">
          <a id="channelLink" href="#" target="_blank" rel="noopener noreferrer">https://t.me/+vFRU3cnfweM3MmU0</a>
          <button id="copyBtn" class="copy-btn" type="button" aria-label="Copier le lien">ðŸ“‹</button>
        </div>
        <div class="footer">Vous pouvez ouvrir le lien dans Telegram ou le coller dans votre navigateur.</div>
      </div>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('keyForm');
      const input = document.getElementById('keyInput');
      const errorMsg = document.getElementById('errorMsg');
      const result = document.getElementById('result');
      const channelLink = document.getElementById('channelLink');
      const copyBtn = document.getElementById('copyBtn');

      const validKeys = new Set(['ABC123', 'ACCESS-2025', 'DEMO-456']);

      function sanitizeKey(key) {
        return key.trim().toUpperCase().replace(/\s+/g, '');
      }

      function showError(message) {
        errorMsg.textContent = message;
        errorMsg.style.display = 'block';
        result.hidden = true;
      }

      function showResult(link) {
        channelLink.href = link;
        channelLink.textContent = link;
        result.hidden = false;
        errorMsg.textContent = '';
        errorMsg.style.display = 'none';
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const key = sanitizeKey(input.value);
        if (!key) return showError("Veuillez entrer une clÃ© d'activation.");
        if (validKeys.has(key)) {
          showResult('https://t.me/+vFRU3cnfweM3MmU0');
        } else {
          showError("ClÃ© invalide. Veuillez vÃ©rifier et rÃ©essayer.");
        }
      });

      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(channelLink.href);
          copyBtn.textContent = 'âœ… CopiÃ© !';
          setTimeout(() => (copyBtn.textContent = 'ðŸ“‹'), 1500);
        } catch {
          alert('Copiez manuellement : ' + channelLink.href);
        }
      });
    });
  </script>
</body>
</html>